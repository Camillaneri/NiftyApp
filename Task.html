<!DOCTYPE html>
<html>
    <head>
        <title>NiftyEValue</title>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" href="./style/modalsurvey.css">

        <!-- Icons -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <!-- Optional JavaScript; choose one of the two! -->
        <!-- Option 1: Bootstrap Bundle with Popper -->
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://kit.fontawesome.com/bc67555ac1.js" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"  integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        
        
        
        <script src="https://kit.fontawesome.com/bc67555ac1.js" crossorigin="anonymous"></script>
        
        <script src="TaskTutorial.js"></script>   
    </head>
    <body id="bd1" class="d-flex flex-column darkGreen" onload="fill_task_dash()">

         <!-- tutorial -->
         <div class="bgdark50 w-100 reveal" id="tutorials">
            <div class="position-absolute bg-dark white z-2000 p-3 br1 vh-25" id="tutorialA">
                <h1>The Gallery</h1>
                <p>Browse freely the images in the gallery.</p>
                <p>Use the images to search other artworks: like an image if you want to find similar artwork, dislike it if you don't want to find similar artwork</p>
                <p>Once you are done click apply to send the query</p>
                <button type="button" class="btn btn-success" id="toTut2a">Next</button>
            </div>

            <div class="position-absolute w-50 bg-dark white z-2000 p-3 br1" id="tutorialB">
                <h1>The dashboard</h1>
                <p>>When you find an image you really like drag it to the left to add it to the dashboard: Imagine it as your personal gallery, where you keep your favorite artpiece!</p>
                
                <button type="button" class="btn btn-success" id="toTutA">Back</button>
                <button type="button" class="btn btn-success" id="toTutC">Next</button>
            </div>
            <div class="position-absolute w-50 bg-dark white z-2000 p-3 br1" id="tutorialC">
                <h1>End task</h1>
                <p>Repeat the process as many time as you'd like, and when you are done click on "end task"</p>
                <button type="button" class="btn btn-success" id="toTut2b">Back</button>
                <button type="button" class="btn btn-success" id="FinishTut">Got it!</button>
            </div>

        </div>

         <!-- header -->
         <div class="py-4 Headercolor" id="Header">
            <span class="d-flex justify-content-between" id="head">
                <span class="text-left text-light me-5"> NiftyEValue</span> 
                <span class="text-right text-light" id="pageName">Home</spandes>
            </span>
        </div>
        <!-- Navbar -->
        <div class="container-fluid px-0">
            <div class="row m-0 gray">
                <div class="col-2 nav-item navnolink text-center py-3">Start</div>
                <div class="col-2 nav-item navnolink text-center py-3">Pre Survey</div>
                <div class="col-2 nav-item navnolink text-center py-3">Warm Up</div>
                <div class="col-2 nav-item lightgreen text-center py-3">Task</div>
                <div class="col-2 nav-item navnolink text-center py-3">End
                </div>
                <div class="col-2 nav-item navnolink text-end py-3 pincontainer">
                    <a class="dot text-dark text-center p-1"  href="help.html">?</a>
                </div>
            </div>
        </div>

       <!-- introduction page -->

       <div class="col" id="introwarmup">
        <div class="container py-5 px-5 my-5 rounded-3 text-center" id="centralBox">
            <h1 class="display-3 pb-3 " id="headerTitle2">Task</h1>
                <p>You have a chance to experiment our application system, test our recommendation algorithm and tell us what you think</p>
                    <p>The rule is to have fun!</p>
                    <p> explore the gallery, find art that you like and search for more.
                    </p>  
        </div>
    </div>
    

        <!-- Display img-->
        
        <div class="z-2000 position-absolute" id="shadow">
                <div class="white bg-dark br1 imgsubst" id="displayimg">
                    <span class="closeimg" onclick="closeimg()">x</span>
                    <!--<button type="button" class="btn btn-success" id="closeimg" onclick="closeimg()">x</button>-->
                    <img id="displayed" src="" class="w-15" alt="...">
                </div>
        </div>
       

<!-- The Modal -->
<!--<div id="myModal" class="">
    <div class="my-5" id="square">
    <span class="close">&times;</span>
    <img class="dimimg" id="img01">
</div>
  </div>-->
  
       

        <!-- Main body -->
        <div class=" wrapper p-0 reveal zindex" id="task2">

           
            <!-- Dashboard -->
            <div class="col-3 gray text-light " id="dashboard"> 
                <div class="position-absolute gray p-3 container-fluid z-1 smaldashead" id="DashHeader">
                    <span> My Gallery</span>
                    <button class="btn text-light gray expand" type="button"id="Expand" onclick="ExpandDash()"> 
                        <i class="bi bi-arrows-angle-expand"></i>
                    </button>
                </div>
                
                <div>
                   <div class="px-1 position-relative mx-3 d-flex" id="imagesGrid"> 
                        
                        <div class="mb-4 mx-3 position-relative getDataboxDash border rounded border-light flex-fill p-0 DataDash" id="div1" ondrop="drop(event)" ondragover="allowDrop(event)"> 
                            <input class='position-absolute cross-btn btn-light p-0 d-none' style='font-family: bootstrap-icons;z-index: 1;' type='button'  onclick='clearImg(event)' value='&#xF62A;'>
                        
                        </div>
                        
                        <div class="mb-4 mx-3 position-relative getDataboxDash border rounded border-light flex-fill p-0 DataDash" id="div1" ondrop="drop(event)" ondragover="allowDrop(event)"> 
                            <input class='position-absolute cross-btn btn-light p-0 d-none' style='font-family: bootstrap-icons;z-index: 1;' type='button'  onclick='clearImg(event)' value='&#xF62A;'>
                        </div>



                        <div class="mb-4 mx-3 position-relative getDataboxDash border rounded border-light flex-fill p-0 DataDash" id="div1" ondrop="drop(event)" ondragover="allowDrop(event)"> 
                            <input class='position-absolute cross-btn btn-light p-0 d-none' style='font-family: bootstrap-icons;z-index: 1;' type='button'  onclick='clearImg(event)' value='&#xF62A;'>
                        </div>
                    
                    
                        <div class="mb-4 mx-3 position-relative getDataboxDash border rounded border-light flex-fill p-0 DataDash" id="div1" ondrop="drop(event)" ondragover="allowDrop(event)"> 
                            <input class='position-absolute cross-btn btn-light p-0 d-none' style='font-family: bootstrap-icons;z-index: 1;' type='button'  onclick='clearImg(event)' value='&#xF62A;'>
                        </div>
                    
                        <div class="mb-4 mx-3 position-relative getDataboxDash border rounded border-light flex-fill p-0 DataDash" id="div1" ondrop="drop(event)" ondragover="allowDrop(event)"> 
                            <input class='position-absolute cross-btn btn-light p-0 d-none' style='font-family: bootstrap-icons;z-index: 1;' type='button'  onclick='clearImg(event)' value='&#xF62A;'>
                        </div>
                    </div>
                        <div class="container-fluid d-flex px-3 bg-dark z-1" id="dashFooter" > 
                            <button class="col btn btn-success me-1 w-50" type="button" onclick="repeatTask()">
                                Repeat the Task
                            </button>
                            <button class="col btn btn-success ms-1 w-50" type="button"  data-bs-toggle="modal" data-bs-target="#exampleModal">
                                End Task
                            </button>
                            
                        </div>
                    </div> 

            </div>
            <!-- Main section -->
            <div class="col-9 p-4" id="mainBody">
                <div class="p-2 mb-2 bg-white">
                    <h4>Task</h4>
                    <p class="lead">
                        Browse the art and put in the dashboard some stuff you like!
                    </p>
                </div> 
                <div class="p-2 mb-2 bg-white">   
                    <div class="input-group h-25">   
                        <div class="col-6 py-2 border-end" > 
                            <span class="row " >
                                <i class="bi bi-hand-thumbs-up py-2">  
                                    Search for images like these
                                </i>
                            </span> 
                            <div class="row mx-1" id="LikesBox">
                            
                            </div> 
                        </div> 
                        <div class="col-6 p-2"> 
                            <span class="row horizontal-scroll">
                                <i class="bi bi-hand-thumbs-down py-2"> 
                                    Avoid images like these
                                </i> 
                            </span>
                            <div class="row mx-1" id="DislikesBox">

                            </div> 
                        </div> 
                    </div> 
                    <div class="row px-2"> 
                        <button class="mx-1 col btn btn-success w-100 py-2" type="button" onclick="Apply_like_dislike()">
                            Apply
                        </button>   
                        <button class="mx-1 col btn btn-success w-100 py-2" type="button" onClick="fill_task_dash()"> <!-- removeQuery()-->
                            Reset
                        </button> 
                    </div>
                </div> 

                <!-- Gallery -->
                <div class="row mt-3" id="dvSource"> 

                    <div class="col-12 col-md-6 col-xl-3">
                        <div class="position-relative no-img imgsubst"  id="drag1"  draggable="true" ondragstart="drag(event)"  onclick="display_img(event)"> 
                            <div class="d-flex position-absolute w-min-conten like_dislike">  
                                 <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtnlike" onclick="AddLiked_Disliked(event)" value="&#xF407;" data-toggle="tooltip" title="click on the  like button to find similar images"> 
                                <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtndislike" onclick="AddLiked_Disliked(event)" value="&#xF405;" data-toggle="tooltip" title="click on the dislike button to avoid similar images"> 
                               
                            </div> 
                            <div class="col-2 position-absolute w-min-content text-left pincontainer" id="" type="button" onclick="Addtodash(event)">
                                <i class="fa-solid pt-2 fa-thumbtack mt-2" id="pin" data-toggle="tooltip" title="click on the pin to add the image to the dashboard">
                                </i>
                            </div>
                            <img id="dragData1" src="" class="w-10 img-to-like" alt="...">
                        </div> 
    
                        <div class="position-relative no-img imgsubst"  id="drag2"  draggable="true" ondragstart="drag(event)"  onclick="display_img(event)" > 
                            <div class="d-flex position-absolute w-min-conten like_dislike">  
                                 <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtnlike" onclick="AddLiked_Disliked(event)" value="&#xF407;" data-toggle="tooltip" title="click on the  like button to find similar images"> 
                                <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtndislike" onclick="AddLiked_Disliked(event)" value="&#xF405;" data-toggle="tooltip" title="click on the dislike button to avoid similar images"> 
                            </div> 
                            <div class="col-2 position-absolute w-min-content text-left pincontainer" id="" type="button" onclick="Addtodash(event)">
                                 <i class="fa-solid pt-2 fa-thumbtack mt-2" id="pin" data-toggle="tooltip" title="click on the pin to add the image to the dashboard"></i>
                            </div>
                            <img id="dragData2" src="" class="w-10 img-to-like" alt="..."> 
                        </div>  
    
                        <div class="position-relative no-img imgsubst"  id="drag3"  draggable="true" ondragstart="drag(event)"  onclick="display_img(event)"> 
                            <div class="d-flex position-absolute w-min-conten like_dislike">  
                                 <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtnlike" onclick="AddLiked_Disliked(event)" value="&#xF407;" data-toggle="tooltip" title="click on the  like button to find similar images"> 
                                <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtndislike" onclick="AddLiked_Disliked(event)" value="&#xF405;" data-toggle="tooltip" title="click on the dislike button to avoid similar images"> 
                            </div>  
                            <div class="col-2 position-absolute w-min-content text-left pincontainer" id="" type="button" onclick="Addtodash(event)">
                                 <i class="fa-solid pt-2 fa-thumbtack mt-2" id="pin" data-toggle="tooltip" title="click on the pin to add the image to the dashboard"></i>
                            </div>
                            <img id="dragData3" src="" class="w-10 img-to-like" alt="..."> 
                        </div> 
    
                        <div class="position-relative no-img imgsubst" id="drag4"  draggable="true" ondragstart="drag(event)"  onclick="display_img(event)"> 
                            <div class="d-flex position-absolute w-min-conten like_dislike"> 
                                 <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtnlike" onclick="AddLiked_Disliked(event)" value="&#xF407;" data-toggle="tooltip" title="click on the  like button to find similar images"> 
                                <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtndislike" onclick="AddLiked_Disliked(event)" value="&#xF405;" data-toggle="tooltip" title="click on the dislike button to avoid similar images">  
                            </div> 
                            <div class="col-2 position-absolute w-min-content text-left pincontainer" id="" type="button" onclick="Addtodash(event)">
                                 <i class="fa-solid pt-2 fa-thumbtack mt-2" id="pin" data-toggle="tooltip" title="click on the pin to add the image to the dashboard"></i>
                            </div>
                            <img id="dragData4" src="" class="w-10 img-to-like" alt="..."> 
                        </div> 
                        
                        <div class="position-relative no-img imgsubst" id="drag5"  draggable="true" ondragstart="drag(event)"  onclick="display_img(event)"> 
                            <div class="d-flex position-absolute w-min-conten like_dislike"> 
                                 <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtnlike" onclick="AddLiked_Disliked(event)" value="&#xF407;" data-toggle="tooltip" title="click on the  like button to find similar images"> 
                                <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtndislike" onclick="AddLiked_Disliked(event)" value="&#xF405;" data-toggle="tooltip" title="click on the dislike button to avoid similar images"> 
                            </div> 
                            <div class="col-2 position-absolute w-min-content text-left pincontainer" id="" type="button" onclick="Addtodash(event)">
                                 <i class="fa-solid pt-2 fa-thumbtack mt-2" id="pin" data-toggle="tooltip" title="click on the pin to add the image to the dashboard"></i>
                            </div>
                            <img id="dragData5" src="" class="w-10 img-to-like" alt="...">
                        </div> 
    
                    </div>

                    <div class="col-12 col-md-6  col-xl-3">
                        <div class="position-relative no-img imgsubst" id="drag6"  draggable="true" ondragstart="drag(event)"  onclick="display_img(event)"> 
                            <div class="d-flex position-absolute w-min-conten like_dislike"> 
                                 <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtnlike" onclick="AddLiked_Disliked(event)" value="&#xF407;" data-toggle="tooltip" title="click on the  like button to find similar images"> 
                                <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtndislike" onclick="AddLiked_Disliked(event)" value="&#xF405;" data-toggle="tooltip" title="click on the dislike button to avoid similar images">  
                            </div> 
                            <div class="col-2 position-absolute w-min-content text-left pincontainer" id="" type="button" onclick="Addtodash(event)">
                                 <i class="fa-solid pt-2 fa-thumbtack mt-2" id="pin" data-toggle="tooltip" title="click on the pin to add the image to the dashboard"></i>
                            </div>
                            <img id="dragData6" src="" class="w-10 img-to-like" alt="..."> 
                        </div> 
    
                        <div class="position-relative no-img imgsubst"  id="drag7"  draggable="true" ondragstart="drag(event)"  onclick="display_img(event)"> 
                            <div class="d-flex position-absolute w-min-conten like_dislike"> 
                                 <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtnlike" onclick="AddLiked_Disliked(event)" value="&#xF407;" data-toggle="tooltip" title="click on the  like button to find similar images"> 
                                <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtndislike" onclick="AddLiked_Disliked(event)" value="&#xF405;" data-toggle="tooltip" title="click on the dislike button to avoid similar images">
                            </div> 
                            <div class="col-2 position-absolute w-min-content text-left pincontainer" id="" type="button" onclick="Addtodash(event)">
                                 <i class="fa-solid pt-2 fa-thumbtack mt-2" id="pin" data-toggle="tooltip" title="click on the pin to add the image to the dashboard"></i>
                            </div>
                            <img id="dragData7" src="" class="w-10 img-to-like" alt="..."> 
                        </div> 
    
                        <div class="position-relative  no-img imgsubst" id="drag8"  draggable="true" ondragstart="drag(event)"  onclick="display_img(event)">  
                            <div class="d-flex position-absolute w-min-conten like_dislike">  
                                 <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtnlike" onclick="AddLiked_Disliked(event)" value="&#xF407;" data-toggle="tooltip" title="click on the  like button to find similar images"> 
                                <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtndislike" onclick="AddLiked_Disliked(event)" value="&#xF405;" data-toggle="tooltip" title="click on the dislike button to avoid similar images"> 
                            </div> 
                            <div class="col-2 position-absolute w-min-content text-left pincontainer" id="" type="button" onclick="Addtodash(event)">
                                 <i class="fa-solid pt-2 fa-thumbtack mt-2" id="pin" data-toggle="tooltip" title="click on the pin to add the image to the dashboard"></i>
                            </div>
                            <img id="dragData8" src="" class="w-10 img-to-like" alt="...">
                        </div>  
    
                        <div class="position-relative  no-img imgsubst" id="drag9"  draggable="true" ondragstart="drag(event)"  onclick="display_img(event)"> 
                            <div class="d-flex position-absolute w-min-conten like_dislike"> 
                                 <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtnlike" onclick="AddLiked_Disliked(event)" value="&#xF407;" data-toggle="tooltip" title="click on the  like button to find similar images"> 
                                <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtndislike" onclick="AddLiked_Disliked(event)" value="&#xF405;" data-toggle="tooltip" title="click on the dislike button to avoid similar images"> 
                            </div> 
                            <div class="col-2 position-absolute w-min-content text-left pincontainer" id="" type="button" onclick="Addtodash(event)">
                                 <i class="fa-solid pt-2 fa-thumbtack mt-2" id="pin" data-toggle="tooltip" title="click on the pin to add the image to the dashboard"></i>
                            </div>
                            <img id="dragData9" src="" class="w-10 img-to-like" alt="...">
                        </div>  
    
                        <div class="position-relative no-img imgsubst" id="drag10"  draggable="true" ondragstart="drag(event)"  onclick="display_img(event)"> 
                            <div class="d-flex position-absolute w-min-conten like_dislike"> 
                                 <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtnlike" onclick="AddLiked_Disliked(event)" value="&#xF407;" data-toggle="tooltip" title="click on the  like button to find similar images"> 
                                <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtndislike" onclick="AddLiked_Disliked(event)" value="&#xF405;" data-toggle="tooltip" title="click on the dislike button to avoid similar images"> 
                            </div>  
                            <div class="col-2 position-absolute w-min-content text-left pincontainer" id="" type="button" onclick="Addtodash(event)">
                                 <i class="fa-solid pt-2 fa-thumbtack mt-2" id="pin" data-toggle="tooltip" title="click on the pin to add the image to the dashboard"></i>
                            </div>
                            <img id="dragData10" src="" class="w-10 img-to-like" alt="...">  
                        </div>   
                    </div>

                    <div class="col-12 col-md-6  col-xl-3">
                        <div class="position-relative no-img imgsubst" id="drag11"  draggable="true" ondragstart="drag(event)"  onclick="display_img(event)"> 
                            <div class="d-flex position-absolute w-min-conten like_dislike"> 
                                 <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtnlike" onclick="AddLiked_Disliked(event)" value="&#xF407;" data-toggle="tooltip" title="click on the  like button to find similar images"> 
                                <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtndislike" onclick="AddLiked_Disliked(event)" value="&#xF405;" data-toggle="tooltip" title="click on the dislike button to avoid similar images">
                            </div>
                            <div class="col-2 position-absolute w-min-content text-left pincontainer" id="" type="button" onclick="Addtodash(event)">
                                 <i class="fa-solid pt-2 fa-thumbtack mt-2" id="pin" data-toggle="tooltip" title="click on the pin to add the image to the dashboard"></i>
                            </div>
                            <img id="dragData11" src="" class="w-10 img-to-like" alt="..."> 
                        </div>  
    
                        <div class="position-relative no-img imgsubst" id="drag12"  draggable="true" ondragstart="drag(event)"  onclick="display_img(event)">
                            <div class="d-flex position-absolute w-min-conten like_dislike"> 
                                 <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtnlike" onclick="AddLiked_Disliked(event)" value="&#xF407;" data-toggle="tooltip" title="click on the  like button to find similar images"> 
                                <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtndislike" onclick="AddLiked_Disliked(event)" value="&#xF405;" data-toggle="tooltip" title="click on the dislike button to avoid similar images">
                            </div> 
                            <div class="col-2 position-absolute w-min-content text-left pincontainer" id="" type="button" onclick="Addtodash(event)">
                                 <i class="fa-solid pt-2 fa-thumbtack mt-2" id="pin" data-toggle="tooltip" title="click on the pin to add the image to the dashboard"></i>
                            </div>  
                            <img id="dragData12" src="" class="w-10 img-to-like" alt="...">     
                        </div> 
                    
                        <div class="position-relative no-img imgsubst" id="drag13"  draggable="true" ondragstart="drag(event)"  onclick="display_img(event)"> 
                            <div class="d-flex position-absolute w-min-conten like_dislike"> 
                                 <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtnlike" onclick="AddLiked_Disliked(event)" value="&#xF407;" data-toggle="tooltip" title="click on the  like button to find similar images"> 
                                <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtndislike" onclick="AddLiked_Disliked(event)" value="&#xF405;" data-toggle="tooltip" title="click on the dislike button to avoid similar images"> 
                            </div> 
                            <div class="col-2 position-absolute w-min-content text-left pincontainer" id="" type="button" onclick="Addtodash(event)">
                                 <i class="fa-solid pt-2 fa-thumbtack mt-2" id="pin" data-toggle="tooltip" title="click on the pin to add the image to the dashboard"></i>
                            </div>
                            <img id="dragData13" src="" class="w-10 img-to-like" alt="..."> 
                        </div>
    
                        <div class="position-relative no-img imgsubst" id="drag14"  draggable="true" ondragstart="drag(event)"  onclick="display_img(event)">
                            <div class="d-flex position-absolute w-min-conten like_dislike">
                                 <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtnlike" onclick="AddLiked_Disliked(event)" value="&#xF407;" data-toggle="tooltip" title="click on the  like button to find similar images"> 
                                <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtndislike" onclick="AddLiked_Disliked(event)" value="&#xF405;" data-toggle="tooltip" title="click on the dislike button to avoid similar images">
                            </div> 
                            <div class="col-2 position-absolute w-min-content text-left pincontainer" id="" type="button" onclick="Addtodash(event)">
                                 <i class="fa-solid pt-2 fa-thumbtack mt-2" id="pin" data-toggle="tooltip" title="click on the pin to add the image to the dashboard"></i>
                            </div>
                            <img id="dragData14" src="" class="w-10 img-to-like" alt="..."> 
                        </div> 
                        
                        <div class="position-relative no-img imgsubst" id="drag15"  draggable="true" ondragstart="drag(event)"  onclick="display_img(event)"> 
                            <div class="d-flex position-absolute w-min-conten like_dislike">   
                                 <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtnlike" onclick="AddLiked_Disliked(event)" value="&#xF407;" data-toggle="tooltip" title="click on the  like button to find similar images"> 
                                <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtndislike" onclick="AddLiked_Disliked(event)" value="&#xF405;" data-toggle="tooltip" title="click on the dislike button to avoid similar images"> 
                            </div> 
                            <div class="col-2 position-absolute w-min-content text-left pincontainer" id="" type="button" onclick="Addtodash(event)">
                                 <i class="fa-solid pt-2 fa-thumbtack mt-2" id="pin" data-toggle="tooltip" title="click on the pin to add the image to the dashboard"></i>
                            </div>
                            <img id="dragData15" src="" class="w-10 img-to-like" alt="..."> 
                        </div>
                    </div>

                    <div class=" col-12 col-md-6 col-xl-3">

                        <div class="position-relative no-img imgsubst" id="drag16"  draggable="true" ondragstart="drag(event)"  onclick="display_img(event)">
                            <div class="d-flex position-absolute w-min-conten like_dislike"> 
                                 <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtnlike" onclick="AddLiked_Disliked(event)" value="&#xF407;" data-toggle="tooltip" title="click on the  like button to find similar images"> 
                                <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtndislike" onclick="AddLiked_Disliked(event)" value="&#xF405;" data-toggle="tooltip" title="click on the dislike button to avoid similar images">
                            </div>
                            <div class="col-2 position-absolute w-min-content text-left pincontainer" id="" type="button" onclick="Addtodash(event)">
                                 <i class="fa-solid pt-2 fa-thumbtack mt-2" id="pin" data-toggle="tooltip" title="click on the pin to add the image to the dashboard"></i>
                            </div>
                            <img id="dragData16" src="" class="w-10 img-to-like" alt="...">
                        </div> 

                        <div class="position-relative no-img imgsubst" id="drag17"  draggable="true" ondragstart="drag(event)"  onclick="display_img(event)"> 
                            <div class="d-flex position-absolute w-min-conten like_dislike">
                                 <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtnlike" onclick="AddLiked_Disliked(event)" value="&#xF407;" data-toggle="tooltip" title="click on the  like button to find similar images"> 
                                <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtndislike" onclick="AddLiked_Disliked(event)" value="&#xF405;" data-toggle="tooltip" title="click on the dislike button to avoid similar images">
                            </div> 
                            <div class="col-2 position-absolute w-min-content text-left pincontainer" id="" type="button" onclick="Addtodash(event)">
                                 <i class="fa-solid pt-2 fa-thumbtack mt-2" id="pin" data-toggle="tooltip" title="click on the pin to add the image to the dashboard"></i>
                            </div>
                            <img id="dragData17" src="" class="w-10 img-to-like" alt="..."> 
                        </div>  

                        <div class="position-relative no-img imgsubst" id="drag18"  draggable="true" ondragstart="drag(event)"  onclick="display_img(event)">
                            <div class="d-flex position-absolute w-min-conten like_dislike"> 
                                 <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtnlike" onclick="AddLiked_Disliked(event)" value="&#xF407;" data-toggle="tooltip" title="click on the  like button to find similar images"> 
                                <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtndislike" onclick="AddLiked_Disliked(event)" value="&#xF405;" data-toggle="tooltip" title="click on the dislike button to avoid similar images">
                            </div><div class="col-2 position-absolute w-min-content text-left pincontainer" id="" type="button" onclick="Addtodash(event)" type="button" onclick="Addtodash(event)">
                                 <i class="fa-solid pt-2 fa-thumbtack mt-2" id="pin" data-toggle="tooltip" title="click on the pin to add the image to the dashboard"></i>
                            </div>
                            <img id="dragData18" src="" class="w-10 img-to-like" alt="...">
                        </div> 

                        <div class="position-relative no-img imgsubst" id="drag19"  draggable="true" ondragstart="drag(event)"  onclick="display_img(event)"> 
                            <div class="d-flex position-absolute w-min-conten like_dislike">
                                 <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtnlike" onclick="AddLiked_Disliked(event)" value="&#xF407;" data-toggle="tooltip" title="click on the  like button to find similar images"> 
                                <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtndislike" onclick="AddLiked_Disliked(event)" value="&#xF405;" data-toggle="tooltip" title="click on the dislike button to avoid similar images">
                            </div>
                            <div class="col-2 position-absolute w-min-content text-left pincontainer" id="" type="button" onclick="Addtodash(event)">
                                 <i class="fa-solid pt-2 fa-thumbtack mt-2" id="pin" data-toggle="tooltip" title="click on the pin to add the image to the dashboard"></i>
                            </div>
                            <img id="dragData19" src="" class="w-10 img-to-like" alt="...">
                        </div> 
                        <div class="position-relative no-img imgsubst" id="drag20"  draggable="true" ondragstart="drag(event)"  onclick="display_img(event)">
                            <div class="d-flex position-absolute w-min-conten like_dislike">
                                 <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtnlike" onclick="AddLiked_Disliked(event)" value="&#xF407;" data-toggle="tooltip" title="click on the  like button to find similar images"> 
                                <input class="p-0 flex-fill" style="font-family: bootstrap-icons" type="button" id="imgBtndislike" onclick="AddLiked_Disliked(event)" value="&#xF405;" data-toggle="tooltip" title="click on the dislike button to avoid similar images"> 
                            </div> 
                            <div class="col-2 position-absolute w-min-content text-left pincontainer" id="" type="button" onclick="Addtodash(event)" type="button" onclick="Addtodash(event)">
                                 <i class="fa-solid pt-2 fa-thumbtack mt-2" id="pin" data-toggle="tooltip" title="click on the pin to add the image to the dashboard"></i>
                            </div>
                            <img id="dragData20" src="" class="w-10 img-to-like" alt="..."> 
                        </div>
                    
                    </div>   
               
                </div>
            </div>        
        </div> 
        </div>
        <!-- Footer -->
        <footer class="mt-auto  py-4 almostBlack text-white-50 position-bottom" id="MainFooter">
            <div class="container text-center">
            <small>Copyright &copy; Your Website</small>
            </div>
        </footer> 
        <!-- Modal -->
       <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Before we finish...</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form class="" id="T-form"> 
                    <div class="p-3"> 
                        <p for="PresurveyInput5" class="lead">On a scale from 1 to 5 how much satisfied are you after this task?</p>
                        <div class="inline slider text-center">
                            <input class="form-range"  type="range" min="1" max="5"  step="1" id="nftExp" name="Satisfaction" required/>
                            <ul class="vals">
                                <li class="text-center">1</li>
                                <li class="text-center">2</li>
                                <li class="text-center">3</li>
                                <li class="text-center">4</li>
                                <li class="text-center">5</li>
                            </ul>
                        </div>
                    </div>
                    <section class="p-3">
                        <p class="lead">Have you encountered one of the following issues?</p>
                        
                        <div class="p-3 entry-field"> 
                            <div class="form-check"> 
                                <input class="form-check-input" type="checkbox" name="Issues" id="ArtExp1" value="toosimilar">
                                <label class="form-check-label" for="ArtExp1">Images were too similar to each other</label> 
                            </div>
                            <div class="form-check"> 
                                <input class="form-check-input" type="checkbox" name="Issues" id="ArtExp2" value="toodifferent">
                                <label class="form-check-label" for="ArtExp2">Images were too different to each other</label> 
                            </div>
                            <div class="form-check"> 
                                <input class="form-check-input" type="checkbox" name="Issues" id="ArtExp3" value="longloadinh">
                                <label class="form-check-label" for="ArtExp3">Loading time was too long</label> 
                            </div>
                            <div class="form-check"> 
                                <input class="form-check-input" type="checkbox" name="Issues" id="ArtExp3" value="discomfort">
                                <label class="form-check-label" for="ArtExp3">I felt disconfortable while using this querying system</label> 
                            </div>
                            <div class="form-check"> 
                                <input class="form-check-input" type="checkbox" name="Issues" id="ArtExp5" value="None">
                                <label class="form-check-label" for="ArtExp5">None of the above</label> 
                            </div>
                        </div> 
                        
                    </section>
                    <section class="p-3">
                
                        <p class="lead">Do you have any additional comment?</p>
                        <p>Did you notice some changes in the algoritm behaviour, comments on the querying system, advices...</p>
                        <div class="input-group mb-3">
                            <input type="text" class="form-control" placeholder="Comments" aria-label="Comments" name="Comments">
                        <div class=" container py-3 px-0"> 
                            <span class="d-inline-block" tabindex="0">
                                <button type="submit" class="btn btn-success px-4 float-end " id="submit">
                                    Submit! 
                                </button> 
                            </span>
                        </div>  
                    </section>
                </form>
            </div>
          </div>
        </div>
    </body>
    <!-- Send stuff from warm up session -->
    <script src="https://unpkg.com/@supabase/supabase-js"></script>
       <script type="module">

        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'
        const supabase3 = createClient('https://cgvvgwcioxjnzpgxisbu.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNndnZnd2Npb3hqbnpwZ3hpc2J1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2NTM3MzM0MzUsImV4cCI6MTk2OTMwOTQzNX0.Ot2PkSTOWzi4RWs_gIsL3g1heXsDYCzflOyBocR-n5U')
      
        
        let myId = sessionStorage.getItem('id');
        
        var refimg = sessionStorage.getItem('WUreference');

        console.log(myId)
        const form = document.querySelectorAll('#T-form')
        form[0].addEventListener('submit', async (event) => {

        event.preventDefault()
        console.log('Task storage: ', sessionStorage)
        var myId = sessionStorage.getItem('id');
        var myImgIds = sessionStorage.getItem('myImgIds');
        var myGallery_count = sessionStorage.getItem('myGallery_count');
        var queryImgsClrd = sessionStorage.getItem('queryImgsClrd');
        var displayedImgs = sessionStorage.getItem('displayedImgs');
        console.log('images',myImgIds,myGallery_count)
        var queries = sessionStorage.getItem('n_queries');
        var toAdd = {};
        for(var i = 0; i <= queries; ++i){
            var query = sessionStorage.getItem('query'+i);
            console.log((JSON.stringify(query)));
            toAdd[i]=query;
            
        }
        var queriesIds = JSON.stringify(toAdd)
        var submission = {'user':myId, 'n_queries':queries, 'queries_ids':queriesIds, 'myImgIds':myImgIds, 'myGallery_count':myGallery_count, 'queryImgsClrd':queryImgsClrd, 'displayedImgs':displayedImgs}
        console.log(myId, queries)
        console.log('final array', JSON.stringify(toAdd))
        
        
        console.log('only logs',submission)

            const formInputs = form[0].querySelectorAll('input[name = Satisfaction], input[name = Issues]:checked, input[name = Comments]')
            
            // scrivere qui gli altri log 
            formInputs.forEach( element =>{
                const { value, name } = element
                if (value) {

                    if (submission[name] != undefined){
                    submission[name]=submission[name]+', '+value}else{submission[name]=value}
                
                }
            })

            console.log('final submission', submission)
            await supabase3.from('Main_task').insert([submission])
            window.location.href = "help.html"

        })
    </script>
    <script src="task.js"></script>
</html>