<!DOCTYPE html>
<html>
    <head>
        <title>NiftyEValue - Warm Up</title>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- styles -->
        <link rel="stylesheet" href="../style.css">
        <link rel="stylesheet" href="../style/modalsurvey.css">
        <!-- Icons -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
        <script src="https://cdn.lordicon.com/xdjxvujz.js"></script>
        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://kit.fontawesome.com/bc67555ac1.js" crossorigin="anonymous"></script>
        <!-- Script to supabase -->
        <script src="https://unpkg.com/@supabase/supabase-js"></script>
    </head>


    <body  class="overflow-hidden lightgray" id="bod"> 
        <!-- Tutorial -->
        <div class="row fixed-bottom bgdark50" id="tutorials">
                    
            <div  class=" position-absolute w-40 bg-dark white z-2000 p-3 br1"  id="tutorial">
                <!-- first box -->
                <div id="tutorial1">
                    <p>1/3</p>
                    <h5>this is the Reference image</h5>
                    <p>Look closely at this artwork and rank the other images according to their
                        visual similarities to it. You can cliick on the images to enlarge them. <br> 
                        Please rank the images from the one you perceive most similar to the most dissimilar to the reference.</p> 
                    <button type="button" class="btn btn-success fxed-bottom" id="toTut2a">Next</button>
                </div>
                <!-- second box -->
                <div  id="tutorial2">
                    <p>2/3</p>
                    <h5>Fetched images</h5>
                    <p id="tail">Look at these artworks and decide which one looks more like the reference image in terms of shape, color, style, then drag and drop them in the numbered slots. </p>
                        <p>The first slot goes to the most similar, second slot to the second most similar, and so on.
                            You donâ€™t have to fill all the slots to complete the task: if you deem some images just too different from the reference, just ignore them.! </p> 
                    <button type="button" class="btn btn-success" id="toTut1">Back</button>
                    <button type="button" class="btn btn-success" id="toTut3">Next</button>
                </div>
                <!-- third box -->
                <div id="tutorial3">
                    <p>3/3</p>
                    <h5>End task</h5>
                    <p>When you are done, click on the "end task" button.</p>
                    <p>If you want to repeat the task, click on "repeat task", you can do it as many times as you wish! </p>
                    <button type="button" class="btn btn-success" id="toTut2b">Back</button>
                    <button type="button" class="btn btn-success" id="FinishTut">Got it!</button>
                </div>
            </div>
           <!-- tutorial kitty -->
            <lord-icon 
            class="position-absolute kitty"
                src="https://cdn.lordicon.com/lzwckydi.json"
                trigger="loop"
                delay="4000"
                style="width:200px;height:200px">
            </lord-icon>
        </div>
        

        <!-- Modal for big size images-->
        <div class="z-2000 position-absolute" id="shadow">
            <div class="white bg-dark br1 imgsubst" id="displayimg">
                <span class="closeimg" onclick="closeimg()">&times;</span>
                <img id="displayed" src="" class="w-15" alt="...">
            </div>
        </div>

        <!-- Introduction page -->
        <div class="col darkGreen" id="introwarm">
            <!-- introduction Header -->
            <div class="py-4 Headercolor" id="Header1">
                <span class="d-flex justify-content-between" id="head1">
                    <span class="text-left text-light me-5"> 
                        <h2>NiftyEValue</h2>
                    </span> 
                    <span class="text-right">
                        <div class="nav-item  pincontainer">
                            <a class="dot text-dark text-center p-1"  href="help.html">?</a>
                        </div>
                    </span>
                </span>
            </div>
            <!-- introduction text -->
            <div class="container px-5 py-5 rounded-3 text-center" id="centralBox">
                <h1 class="display-3 pb-3 " id="headerTitle2">Warm-up Task</h1>
                <p>Help us evaluate how effective our retrieval algorithm is.</p>
                <p>You will be asked to rank a series of artworks based on their similarity to a reference image.</p>
                <button type="button" class="btn btn-success darkGreen text-light py-2 px-5 mt-3" id="warmstart">Start!</button>
            </div>
        </div>

        <!-- Begin main page -->
        <!-- Header -->
         <div class="py-4 Headercolor" id="Header">
            <span class="d-flex justify-content-between" id="head">
                <span class="text-left text-light me-5"> <h2>NiftyEValue</h2></span> 

                <span class="text-right"><div class="nav-item  pincontainer">
                    <a class="dot text-dark text-center p-1"  href="help.html">?</a>
                </div></span>
            </span>
        </div>
        <!-- Navbar -->
        <div class="container-fluid px-0">
            <div class="row m-0 gray">
                <div class="col-1"></div>
                <div class="col-2 nav-item navnolink text-center py-3">Start</div>
                <div class="col-2 nav-item navnolink text-center py-3">Pre Survey</div>
                <div class="col-2 nav-item lightgreen text-dark text-center py-3">Warm Up</div>
                <div class="col-2 nav-item navnolink text-center py-3">Task</div>
                <div class="col-2 nav-item navnolink text-center py-3">End</div>
                <div class="col-1"></div>
            </div>
        </div>
        
        <!-- Main -->
        <div class="d-flex zindex overflow-hidden" id="task">   
            <div class="col-4 px-4 almostBlack py-3" id="refimg">      
                <!-- here goes the reference image -->
                <div class="px-0 " id="refimgcont1">  
                    <div class="aclass" id="refimgcontainer">            
                        <div id="RefImg" class="position-relative text-center almostBlack imgsubst pb-3"> 
                            <img id="reference" class="REF" src=""> 
                        </div>     
                    </div>                      
                </div>
                <!-- Here goes the task description -->
                <div class="p-2 bg-white mb-3">  
                    <h4>Task</h4>
                    <p >Order the images based on their similarity to the reference image</p>
                </div> 
                <!-- Buttons -->
                <div class="mt-3 d-flex" id="buttons2"> 
                    <div class="col-6 p-1"> 
                        <!-- Repeat task button -->
                        <button class="w-100 col-6 btn btn-success py-2 px-4"  type="button"  onclick="repeatask()" id="repeat-btn" disabled>
                        Repeat task
                        </button>    
                    </div>
                    <div class="col-6 p-1">
                        <!-- End task button -->
                        <button class="w-100 col-6 btn btn-success py-2 px-4" type="button" data-bs-toggle="modal" data-bs-target="#exampleModal" onclick="endTask()" id="end-btn" disabled> 
                        End task
                        </button>  
                    </div>                   
                </div>    
            </div>    
            
            <!-- Numbered boxes for reordered images -->
            <div class="position-relative mx-auto flex-fill" id="clumnN2">  
                <div class="p-4 collapse show almostBlack" id="Small">  
                    <div class="dropboxes d-flex overflowY almostBlack">
                        <div class="getDatabox1">                     
                            <div id="getData1"  class="position-relative  text-center tall-img" >            
                                <button class="position-absolute cross-btn btn-dark align-self-end d-none pincontainer" onclick="clearImg(event)">x</button> 
                                <div class="position-absolute m-1 z-1 border-dot">
                                    #1
                                </div> 
                                <img id="WUimg1" class="img-fit" value="" src="">
                            </div>        
                        </div>   
                        <div class="getDatabox1">                          
                            <div id="getData2" class="position-relative  text-center tall-img" >            
                                <button class="position-absolute cross-btn btn-dark align-self-end d-none pincontainer" onclick="clearImg(event)">x</button> 
                                <div class="position-absolute m-1 z-1 border-dot">
                                    #2
                                </div> 
                                <img id="WUimg2" class="img-fit" value="" src="">
                            </div>          
                        </div>        
                        <div class="getDatabox1"> 
                            <div id="getData3" class="position-relative  text-center tall-img" >            
                                <button class="position-absolute cross-btn btn-dark align-self-end d-none pincontainer" onclick="clearImg(event)">x</button> 
                                <div class="position-absolute m-1 z-1 border-dot">
                                    #3
                                </div> 
                                <img id="WUimg3" class="img-fit" value="" src="">
                            </div>       
                        </div>        
                        <div class="getDatabox1">            
                            <div id="getData4" class="position-relative  text-center tall-img" >            
                                <button class="position-absolute cross-btn btn-dark align-self-end d-none pincontainer" onclick="clearImg(event)">x</button> 
                                <div class="position-absolute m-1 z-1 border-dot">
                                    #4
                                </div> 
                                <img id="WUimg4" class="img-fit" value="" src="">
                            </div>         
                        </div>        
                        <div class="getDatabox1">     
                            <div id="getData5"class="position-relative  text-center tall-img" >            
                                <button class="position-absolute cross-btn btn-dark align-self-end d-none pincontainer" onclick="clearImg(event)">x</button> 
                                <div class="position-absolute m-1 z-1 border-dot">
                                    #5
                                </div> 
                                <img id="WUimg5" class="img-fit" value="" src="">
                            </div>        
                        </div>  
                    </div>       
                </div>  
                <!-- Buttons to change boxes' sizes -->
                <div class="flex-grow-1 text-center justify-content-center" id="linguetta">
                    <button type="button" class="almostBlack text-center" onclick="arrowDown()" id="arrowDownButton"><i class="fa-solid fa-chevron-down"></i></button>
                    <button type="button" class="almostBlack text-center d-none" onclick="arrowUp()" id="arrowUpButton"><i class="fa-solid fa-chevron-up"></i></button>
                </div>
                <!-- grid with starting images -->
                <div class="row px-4 d-flex flex-wrap mx-auto overflowY dcenter-item" id="coso">    
                    <div class="col-12 col-md-6 col-lg-4 position-relative simimages imgsubst mb-3 px-2 p-0"  onclick="display_img(event)"  id="similarBox0">
                        <div class="col-2 position-absolute w-min-content text-left pincontainer" id="" type="button" onclick="pin_WU(event)">
                            <i class="fa-solid pt-2 fa-thumbtack" id="pin" data-toggle="tooltip" title="click on the pin to add the image to the dashboard"></i>
                       </div>
                        <img value="0" src="" class="img max-h-50 w-100 recover similarImg0"  id="">    
                    </div> 
                    
                    <div class="col-12 col-md-6 col-lg-4 position-relative simimages imgsubst mb-3 px-2 p-0"  onclick="display_img(event)"  id="similarBox1">
                        <div class="col-2 position-absolute w-min-content text-left pincontainer" id="" type="button" onclick="pin_WU(event)">
                            <i class="fa-solid pt-2 fa-thumbtack" id="pin" data-toggle="tooltip" title="click on the pin to add the image to the dashboard"></i>
                       </div>
                       <img value="0" src="" class="img max-h-50 w-100 recover similarImg0"  id="">

                    </div> 
                    
                    <div class="col-12 col-md-6 col-lg-4  position-relative simimages imgsubst mb-3 px-2 p-0"  onclick="display_img(event)"  id="similarBox2">
                        <div class="col-2 position-absolute w-min-content text-left pincontainer" id="" type="button" onclick="pin_WU(event)">
                            <i class="fa-solid pt-2 fa-thumbtack" id="pin" data-toggle="tooltip" title="click on the pin to add the image to the dashboard"></i>
                       </div>
                        <img value="0" src="" class="img max-h-50 w-100 recover similarImg0"  id="">
                    </div> 
                    
                    <div class="col-12 col-md-6 col-lg-4  position-relative simimages imgsubst mb-3 px-2 p-0"  onclick="display_img(event)"  id="similarBox3" >
                        <div class="col-2 position-absolute w-min-content text-left pincontainer" id="" type="button" onclick="pin_WU(event)">
                            <i class="fa-solid pt-2 fa-thumbtack" id="pin" data-toggle="tooltip" title="click on the pin to add the image to the dashboard"></i>
                       </div>
                        <img value="0" src="" class="img max-h-50 w-100 recover similarImg0"  id="">                     
                    </div>

                     <div class="col-12 col-md-6 col-lg-4  position-relative simimages imgsubst mb-3 px-2 p-0"  onclick="display_img(event)"  id="similarBox4">
                        <div class="col-2 position-absolute w-min-content text-left pincontainer" id="" type="button" onclick="pin_WU(event)">
                            <i class="fa-solid pt-2 fa-thumbtack" id="pin" data-toggle="tooltip" title="click on the pin to add the image to the dashboard"></i>
                        </div>
                        <img value="0" src="" class="img max-h-50 w-100 recover similarImg0"  id="">
                    </div>     
                </div> 
            </div>
        </div>
        <!-- Footer -->
        <footer class="py-4 almostBlack text-white-50" id="MainFooter">
            <div class="container text-center">
                <small>NiftyEvalue by Chiara Catizone and Camilla Neri <br>
                This work is licensed under a <a class="white" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
            </small>
            </div>
        </footer>     

       <!-- Modal -->
       <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Before we move on...</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Task survey -->
                <form class="" id="WU-form"> 
                    <!-- Question 1 -->
                    <div class="p-3"> 
                        <p for="PresurveyInput5" class="lead">On a scale from 1 to 5 how much satisfied are you after this task?</p>
                        <div class="inline slider text-center">
                            <input class="form-range"  type="range" min="1" max="5"  step="1" id="nftExp" name="Satisfaction" required/>
                            <ul class="vals">
                                <li class="text-center">1</li>
                                <li class="text-center">2</li>
                                <li class="text-center">3</li>
                                <li class="text-center">4</li>
                                <li class="text-center">5</li>
                            </ul>
                        </div>
                    </div>
                    <!-- Question 2 -->
                    <section class="p-3">
                        <p class="lead">Have you encountered one of the following issues?</p>
                        
                        <div class="p-3 entry-field"> 
                            <div class="form-check"> 
                                <input class="form-check-input" type="checkbox" name="Issues" id="ArtExp1" value="toosimilar">
                                <label class="form-check-label" for="ArtExp1">Images were too similar to each other</label> 
                            </div>
                            <div class="form-check"> 
                                <input class="form-check-input" type="checkbox" name="Issues" id="ArtExp2" value="toodifferent">
                                <label class="form-check-label" for="ArtExp2">Images were too different to each other</label> 
                            </div>
                            <div class="form-check"> 
                                <input class="form-check-input" type="checkbox" name="Issues" id="ArtExp3" value="longloadinh">
                                <label class="form-check-label" for="ArtExp3">Loading time was too long</label> 
                            </div>
                            <div class="form-check"> 
                                <input class="form-check-input" type="checkbox" name="Issues" id="ArtExp5" value="None">
                                <label class="form-check-label" for="ArtExp5">None of the above</label> 
                            </div>
                        </div> 
                        
                    </section>
                    <!-- Question 3 -->
                    <section class="p-3">
                        <p class="lead">Do you have any additional comment?</p>
                        <p>Impressions on the algorithm, additional issues, advices</p>
                        <div class="input-group mb-3">
                            <input type="text" class="form-control" placeholder="Comments" aria-label="Comments" name="Comments">
                        <div class=" container py-3 px-0"> 
                            <span class="d-inline-block" tabindex="0">
                                <button type="submit" class="btn btn-success p-3 float-end" id="submit">
                                    Submit! 
                                </button> 
                            </span>
                        </div>  
                    </section>
                </form>
            </div>
          </div>
        </div>
    </body>   
    <!-- Script for supabase -->
    <script type="module" src="/js_app/Warm_up/supa_warmup.js"> </script>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script> 
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <!-- Script loading images and other -->
    <script src="/js_app/Warm_up/WUrequests.js"></script>
    <!-- Script -->
    <script src="/js_app/Warm_up/WUfunctions.js"></script>

</html>
